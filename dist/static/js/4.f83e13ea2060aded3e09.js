webpackJsonp([4],{enJo:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("mvHQ"),o=s.n(a),r=s("pFYg"),i=s.n(r),l=s("8bfa"),n=s("AIB4"),c=s("Amqo"),d=s("mtWM"),u=s.n(d),m={data:function(){return this.getParams(),this.init(),this.getOptionalCourses(),{year:"",semester:0,studentId:"",st:[],choosing:100,coursesNames:[],dialogFormVisible:!1,courseName:{mes:"暂无课程"},heads:[{type:"",label:"",key:0},{type:"",label:"",key:1}],options:[],formLabelWidth:"120px",formInline:{user:"",region:""},test:{},yearOptions:[{value:"2016/2017",label:"2016/2017学年"},{value:"2017/2018",label:"2017/2018学年"},{value:"2018/2019",label:"2018/2019学年"},{value:"2019/2020",label:"2019/2020学年"}],semesterOptions:[{value:"1",label:"第一学期"},{value:"2",label:"第二学期"},{value:"3",label:"第三学期"},{value:"4",label:"第四学期"}],dialogFormVisible2:!1,form:{year:"2018/2019",semester:"1"}}},components:{ElSelectDropdown:c.a,sideBarRouter:l.a,headBarRouter:n.a},methods:{init:function(){var e=this;u()({method:"get",url:"http://47.110.134.247/group2_b/scheduleSet/personalSchedule/",params:{year:"2018/2019",semester:1,studentId:this.studentId}}).then(function(t){e.test=t.data.data.courses;var s=JSON.parse(t.data.data.courses);for(var a in e.heads[0].type="success",e.heads[0].label=t.data.data.year,e.heads[1].type="",e.heads[1].label="第 "+t.data.data.semester+" 学期",s)s.hasOwnProperty(a)&&e.coursesNames.push({id:a,mes:s[a]});e.reformList(e.coursesNames)})},getOptionalCourses:function(){var e=this;u()({method:"get",url:"http://47.110.134.247/group2_b/scheduleSet/courses/",params:{pageNumber:"0",pageSize:"10"}}).then(function(t){e.options=t.data.data.courses})},chooseLesson:function(e){e>=100?alert("禁止修改侧边栏！"):(console.log("选课"),console.log("选课时的id：",e),this.choosing=e,this.dialogFormVisible=!0)},confirm:function(){var e=parseInt(this.choosing)+Math.ceil(parseInt(this.choosing)/7-1);console.log("确定时的id：",e),this.coursesNames[e].mes=this.formInline.region,this.formInline.region="",this.dialogFormVisible=!1},reformList:function(){this.coursesNames.unshift({id:101,mes:"第一节课"}),this.coursesNames.splice(8,0,{id:102,mes:"第二节课"}),this.coursesNames.splice(16,0,{id:103,mes:"第三节课"}),this.coursesNames.splice(24,0,{id:104,mes:"第四节课"}),this.coursesNames.splice(32,0,{id:105,mes:"第五节课"}),this.coursesNames.splice(40,0,{id:106,mes:"第六节课"}),this.coursesNames.splice(48,0,{id:107,mes:"第七节课"})},save:function(){console.log(this.$route.query.row.studentId),console.log(i()(this.$route.query.row.studentId));var e={};for(var t in this.coursesNames)this.coursesNames[t].id<100&&(e[this.coursesNames[t].id]=this.coursesNames[t].mes);u()({method:"post",url:"http://47.110.134.247/group2_b/scheduleSet/personalSchedule/save",data:{studentId:this.$route.query.row.studentId,year:this.form.year,semester:this.form.semester,courses:o()(e)}}),alert("保存成功！")},getParams:function(){var e=this.$route.query.row;this.studentId=e.studentId,console.log(this.studentId)},confirmYears:function(){var e=this;this.heads[0].label=this.form.year+" 学年",this.heads[1].label="第 "+this.form.semester+" 学期",this.dialogFormVisible2=!1,u()({method:"get",url:"http://47.110.134.247/group2_b/scheduleSet/personalSchedule/",params:{year:this.form.year,semester:this.form.semester,studentId:this.studentId}}).then(function(t){e.coursesNames=[],e.test=t.data.data.courses;var s=JSON.parse(t.data.data.courses);for(var a in e.heads[0].type="success",e.heads[0].label=t.data.data.year,e.heads[1].type="",e.heads[1].label="第 "+t.data.data.semester+" 学期",s)s.hasOwnProperty(a)&&e.coursesNames.push({id:a,mes:s[a]});e.reformList(e.coursesNames)})}}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-container",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",width:"100%"},attrs:{direction:"vertical"}},[s("el-header",{staticStyle:{height:"82px",background:"#f1f2f7"}},[s("head-bar-router")],1),e._v(" "),s("el-container",{staticStyle:{"margin-outside":"0"}},[s("el-aside",{attrs:{width:"211px"}},[s("side-bar-router")],1),e._v(" "),s("el-main",[e._l(e.heads,function(t){return s("el-tag",{key:t.key,attrs:{type:t.type,effect:"dark"}},[e._v("\n          "+e._s(t.label)+"\n        ")])}),e._v(" "),s("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible2=!0}}},[e._v("选择学年学期")]),e._v(" "),s("el-dialog",{attrs:{title:"选择查询的学年学期",visible:e.dialogFormVisible2},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[s("el-form",{attrs:{model:e.form}},[s("el-form-item",{attrs:{label:"学年","label-width":e.formLabelWidth}},[s("el-select",{attrs:{clearable:"",placeholder:"请选择学年",id:"chooseSemester"},model:{value:e.form.year,callback:function(t){e.$set(e.form,"year",t)},expression:"form.year"}},e._l(e.yearOptions,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"学期","label-width":e.formLabelWidth}},[s("el-select",{attrs:{clearable:"",placeholder:"请选择学期",id:"chooseYear"},model:{value:e.form.semester,callback:function(t){e.$set(e.form,"semester",t)},expression:"form.semester"}},e._l(e.semesterOptions,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible2=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmYears()}}},[e._v("确 定")])],1)],1),e._v(" "),s("div",{attrs:{id:"creatSchoolTable"}},[s("el-row",[s("el-col",{attrs:{span:3}},[s("div",{staticClass:"grid-content bg-purple"},[e._v("节次\\星期")])]),e._v(" "),s("el-col",{attrs:{span:3}},[s("div",{staticClass:"grid-content bg-purple-light"},[e._v("一")])]),e._v(" "),s("el-col",{attrs:{span:3}},[s("div",{staticClass:"grid-content bg-purple"},[e._v("二")])]),e._v(" "),s("el-col",{attrs:{span:3}},[s("div",{staticClass:"grid-content bg-purple-light"},[e._v("三")])]),e._v(" "),s("el-col",{attrs:{span:3}},[s("div",{staticClass:"grid-content bg-purple"},[e._v("四")])]),e._v(" "),s("el-col",{attrs:{span:3}},[s("div",{staticClass:"grid-content bg-purple-light"},[e._v("五")])]),e._v(" "),s("el-col",{attrs:{span:3}},[s("div",{staticClass:"grid-content bg-purple"},[e._v("六")])]),e._v(" "),s("el-col",{attrs:{span:3}},[s("div",{staticClass:"grid-content bg-purple-light"},[e._v("日")])])],1),e._v(" "),s("el-row",{attrs:{span:3}},e._l(e.coursesNames,function(t){return s("el-col",{key:t.id,attrs:{span:3}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("span",[e._v(e._s(t.mes))]),e._v(" "),s("el-button",{attrs:{icon:"el-icon-edit",circle:"",type:"primary",size:"medium"},on:{click:function(s){return e.chooseLesson(t.id)}}})],1)])}),1),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("保存")]),e._v(" "),s("div",[s("el-dialog",{attrs:{title:"选择课程",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[s("el-form-item",{attrs:{label:"课程选择"}},[s("el-select",{attrs:{placeholder:"下拉选择课程"},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},e._l(e.options,function(e){return s("el-option",{key:e.id,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)],1)],2)],1)],1)],1)},staticRenderFns:[]};var p=s("VU/8")(m,h,!1,function(e){s("lcdI")},null,null);t.default=p.exports},lcdI:function(e,t){}});
//# sourceMappingURL=4.f83e13ea2060aded3e09.js.map